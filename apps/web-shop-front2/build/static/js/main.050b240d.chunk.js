(this["webpackJsonp@team21/web-shop-front2"]=this["webpackJsonp@team21/web-shop-front2"]||[]).push([[0],{71:function(e,t,s){},72:function(e,t,s){},73:function(e,t,s){},74:function(e,t,s){},76:function(e,t,s){},77:function(e,t,s){},78:function(e,t,s){},79:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s.n(a),n=s(44),c=s.n(n),i=s(4),l=s(90),o=s(22),d=s(6),u=s(80),m=s(92),b=s(93),j=function(e){return new u.a({link:new m.a({uri:"".concat("http://localhost:8082","/v1/graphql"),headers:e?{Authorization:"Bearer ".concat(e)}:{}}),cache:new b.a})};function x(e){var t={id:"",email:"",cart_id:""};if(!e)return t;try{var s=JSON.parse(atob(e.split(".")[1]));return{id:s.id,email:s.email,cart_id:s.cart_id}}catch(a){return t}}var p=s(28);function h(e,t){switch(t.type){case"SET_USER":return Object(p.a)(Object(p.a)({},e),{user:t.payload});case"SET_TOKEN":return Object(p.a)(Object(p.a)({},e),{token:t.payload});case"LOGOUT":return S;default:return e}}var O,f,g,v,w,y,_,N,C,k,$=s(1),S={user:x(localStorage.getItem("token")),token:localStorage.getItem("token")},P=Object(a.createContext)([S,null]),T=function(){return Object(a.useContext)(P)},q=function(e){var t=e.children,s=Object(a.useReducer)(h,S),r=Object(i.a)(s,2),n=r[0],c=r[1];return Object($.jsx)(P.Provider,{value:[n,c],children:t})},I=s.p+"static/media/placeholder.3c0a422b.jpg",R=(s(71),function(e){var t=e.src,s=e.alt,a=e.width,r=e.height,n=e.wrapperClassName,c=e.rounded;return Object($.jsx)("div",{className:n,children:Object($.jsx)("div",{className:"w-".concat(a||"full"," h-").concat(r||"full"," p-4 mx-auto"),children:Object($.jsx)("img",{src:t||I,alt:s||"image",className:"image ".concat(c?"rounded-full":"rounded-none"," w-full max-h-full align-middle hover:opacity-90}")})})})}),E=function(e){var t=e.title,s=e.buttonColor,a=e.textColor,r=e.disabled,n=e.block,c=e.rounded,i=e.size,l=e.customClass,o=e.onClick;return Object($.jsx)("button",{disabled:r,onClick:o,className:"bg-".concat(s||"primary"," \n      text-").concat(a||"white","\n      px-40 py-12 whitespace-nowrap\n      text-").concat(i||"base","\n      hover:bg-opacity-90\n      ").concat(r?"opacity-60 cursor-not-allowed":"cursor-pointer","\n      ").concat(c?"rounded-full":"","\n      ").concat(n?"w-full":"","\n      ").concat(l||""),children:t&&Object($.jsx)("span",{className:"font-bold",children:t})})},F=function(e){var t=e.title,s=e.body,a=e.buttonTitle,r=e.onClick,n=e.imageSrc,c=e.imageAlt,i=e.imageHeight,l=e.customClass;return Object($.jsxs)("div",{className:"hover:shadow-lg overflow-hidden p-4 border-default border-solid border-lightGray ".concat(l||""),children:[Object($.jsx)(R,{src:"".concat(n||I),alt:"".concat(c||"card-image"),height:i}),Object($.jsxs)("div",{className:"p-4 mt-8 text-center",children:[Object($.jsx)("h5",{className:"text-whitesmoke text-xl font-semibold mb-8 break-words",children:t}),Object($.jsx)("div",{className:"mb-24",children:s}),Object($.jsx)(E,{buttonColor:"primary",textColor:"whitesmoke",title:a,onClick:r,customClass:"mb-12"})]})]})},G=(s(72),function(e){var t,s=e.product;e.category;function a(e){var t=e.split("T"),s=t[0].split("-"),a=t[1].split(".")[0].split("+");return s[2]+"/"+s[1]+"/"+s[0]+" "+a[0]}return Object($.jsxs)(r.a.Fragment,{children:[Object($.jsx)("div",{className:"description my-8",children:Object($.jsxs)("p",{className:"text-base text-lightGray px-8 whitespace-normal break-all text-left",children:[" ",s.description&&(t=s.description,t.length<90?t:"".concat(t.slice(0,90),"..."))," "]})}),Object($.jsx)("div",{className:"my-12",children:s.price&&Object($.jsxs)("span",{className:"text-xl text-whitesmoke font-semibold",children:[" $",s.price," "]})}),Object($.jsxs)("div",{className:"my-8",children:[s&&s.quantity&&Object($.jsxs)("span",{className:"".concat(s.quantity>0?"text-success":"text-red"," text-md font-semibold"),children:[" ",s.quantity>0?"In Stock: ".concat(s.quantity):"Out of Stock"," "]}),s&&s.date_start&&!s.course_cost&&!s.course_last&&!s.course_plan&&Object($.jsxs)("div",{className:"text-whitesmoke text-md font-semibold text-center mb-16",children:["Start: ",a(s.date_start)]}),s&&s.date_end&&!s.course_cost&&!s.course_last&&!s.course_plan&&Object($.jsxs)("div",{className:"text-whitesmoke text-md font-semibold text-center mb-16",children:["End: ",a(s.date_end)," "]}),s&&s.place&&Object($.jsxs)("div",{className:"text-success text-lg font-semibold",children:[" ",s.place," "]})]})]})}),z=function(e){var t=e.product,s=e.category,a=t.id,r=t.name,n=t.image,c=Object(d.g)();return Object($.jsx)(F,{title:r,imageSrc:n,imageAlt:"".concat(r,"-image"),imageHeight:"200px",buttonTitle:"More Details",onClick:function(){c("/product",{state:{id:a,category:s||""}})},body:Object($.jsx)(G,{product:t,category:s}),customClass:"product-tile w-80 mx-24 my-12"})},U=(s(73),function(e){var t=e.category,s=Object(d.g)();return Object($.jsx)(F,{title:"".concat(t.name),imageSrc:t.image,imageAlt:"".concat(t.name,"-image"),imageHeight:"120px",buttonTitle:"View More",onClick:function(){s("/category",{state:{id:t.id,name:t.name}})},customClass:"category-tile w-52 mx-24 my-12"})}),L=(s(74),s(32)),A=function(e){var t=e.id,s=e.defaultValue,a=void 0===s?"":s,r=e.wrapperClassName,n=e.placeholder,c=e.type,i=e.errorText,l=e.labelText,o=e.labelClass,d=e.width,u=e.innerRef,m=e.customClass;return Object($.jsxs)("div",{className:r,children:[Object($.jsx)("label",{htmlFor:t,children:l&&Object($.jsx)("span",{className:o,children:l})}),Object($.jsx)("div",{className:"mt-8",children:Object($.jsx)("input",Object(p.a)({defaultValue:a,className:"".concat(m||""," w-").concat(d||"full"," bg-white text-dark border-default border-solid border-lightGray hover:border-gray focus:outline-none focus:border-dark pl-4 py-4"),id:t,type:c,placeholder:n},u))}),i&&Object($.jsx)("p",{className:"mb-2 text-sm text-red",children:i})]})},W=function(e){var t,s,a=e.title,r=void 0===a?"Login":a,n=e.onClick,c=e.username,i=e.error,l=Object(L.a)(),o=l.register,d=l.handleSubmit,u=l.formState,m=u.isDirty,b=u.isSubmitting,j=u.errors;return Object($.jsx)("form",{onSubmit:d((function(e){return n(e.username,e.password)})),children:Object($.jsxs)("div",{className:"p-16 w-96",children:[Object($.jsx)("div",{className:"pb-4 font-bold text-center text-whitesmoke text-h2 mb-24",children:r}),Object($.jsx)("hr",{className:"mb-24 border-gray"}),Object($.jsx)(A,{id:"username",labelText:"".concat(c?"Username":"Email"),labelClass:"text-whitesmoke text-lg",type:"text",placeholder:"Please enter username",innerRef:o("username",{required:"".concat(c?"Username required":"Email required")}),errorText:null===(t=j.username)||void 0===t?void 0:t.message,customClass:"mb-16 rounded-xs bg-white text-dark"}),Object($.jsx)(A,{id:"password",labelText:"Password",labelClass:"text-whitesmoke text-lg",type:"password",placeholder:"Please enter password",innerRef:o("password",{required:"Password Required"}),errorText:null===(s=j.password)||void 0===s?void 0:s.message,customClass:"mb-16 rounded-xs"}),i&&Object($.jsx)("div",{className:"text-red",children:"Wrong email or password!"}),Object($.jsx)("div",{className:"flex justify-center pt-12 pb-12",children:Object($.jsx)(E,{block:!0,title:"Login",disabled:!m||b})})]})})},M=function(e){var t,s,a,r,n=e.title,c=void 0===n?"Registration":n,i=e.onClick,l=e.error,o=Object(L.a)(),d=o.register,u=o.handleSubmit,m=o.formState,b=o.watch,j=m.isDirty,x=m.isSubmitting,p=m.errors;return Object($.jsx)("form",{onSubmit:u((function(e){return i(e.fullName,e.email,e.password)})),children:Object($.jsxs)("div",{className:"p-16 w-96",children:[Object($.jsx)("div",{className:"pb-4 font-bold text-center text-whitesmoke text-h2 mb-12",children:c}),Object($.jsx)("hr",{className:"mb-24 border-gray"}),Object($.jsx)(A,{id:"fullName",labelText:"Full name",labelClass:"text-whitesmoke text-lg",type:"text",placeholder:"Please enter name",innerRef:d("fullName",{required:"Name required"}),errorText:null===(t=p.fullName)||void 0===t?void 0:t.message,customClass:"mb-16 rounded-xs"}),Object($.jsx)(A,{id:"email",labelText:"Email",labelClass:"text-whitesmoke text-lg",type:"text",placeholder:"Please enter email",innerRef:d("email",{required:"Email required"}),errorText:null===(s=p.email)||void 0===s?void 0:s.message,customClass:"mb-16 rounded-xs"}),Object($.jsx)(A,{id:"password",labelText:"Password",labelClass:"text-whitesmoke text-lg",type:"password",placeholder:"Please enter password",innerRef:d("password",{required:"Password Required"}),errorText:null===(a=p.password)||void 0===a?void 0:a.message,customClass:"mb-16 rounded-xs"}),Object($.jsx)(A,{id:"repeat",labelText:"Repeat password",labelClass:"text-whitesmoke text-lg",type:"password",placeholder:"Please repeat password",innerRef:d("repeat",{required:"Password Required",validate:function(e){return e===b("password")||"Passwords do not match!"}}),errorText:null===(r=p.repeat)||void 0===r?void 0:r.message,customClass:"mb-16 rounded-xs"}),l&&Object($.jsx)("div",{className:"text-red",children:"Email already registred!"}),Object($.jsx)("div",{className:"flex justify-center pt-12 pb-12",children:Object($.jsx)(E,{block:!0,title:"Register",disabled:!j||x})})]})})},D=(s(76),function(e){var t=e.text;return Object($.jsxs)("div",{className:"absolute flex items-center justify-center w-full top-1/4",children:[Object($.jsxs)("p",{className:"mr-16 text-primary text-h2",children:[" ",t||"Loading ..."," "]}),Object($.jsx)("div",{className:"w-16 h-16 rounded-full loader-spin"})]})}),B=function(e){var t=e.name,s=e.path,a=e.onClick;return Object($.jsx)("li",{className:"my-8 mx-24 hover:opacity-60",children:a?Object($.jsx)("a",{className:"no-underline text-whitesmoke text-xl cursor-pointer",onClick:a,children:t}):Object($.jsxs)(o.b,{className:"no-underline text-whitesmoke text-xl",to:s,children:[" ",t," "]})})},H=(s(77),function(e){var t=e.children;return Object($.jsx)("div",{children:Object($.jsx)("nav",{children:Object($.jsx)("ul",{className:"w-full flex flex-wrap justify-center py-8 list-none bg-bcPrimary",children:t})})})}),Y=s(54),V=function(e){var t=e.onPageChange,s=e.displayPerPage,a=e.total,r=e.currentPage,n=Math.ceil(a/s);return Object($.jsxs)("nav",{className:"flex items-center justify-between px-40 border-t border-gray-200",children:[Object($.jsx)("div",{className:"flex flex-1 w-0 -mt-px",children:Object($.jsxs)("div",{onClick:function(){return t(r-1)},className:"text-xl cursor-pointer inline-flex items-center pt-4 pr-1 font-medium text-primary border-t-2 border-transparent hover:opacity-60 ".concat(0===r?"invisible":""),children:[Object($.jsx)(Y.a,{className:"w-8 h-8 mr-3 text-gray-400","aria-hidden":"true"}),"Previous"]})}),Object($.jsx)("div",{className:"hidden md:-mt-px md:flex",children:Array.from(Array(n).keys()).map((function(e){return Object($.jsx)("div",{onClick:function(){return t(e)},className:"text-xl cursor-pointer inline-flex items-center px-8 pb-2 font-medium border-b-2  ".concat(e===r?"border-primary text-primary":"border-transparent text-whitesmoke hover:opacity-60"," "),children:e+1},e+1)}))}),Object($.jsx)("div",{className:"flex justify-end flex-1 w-0 -mt-px",children:Object($.jsxs)("div",{onClick:function(){return t(r+1)},className:"".concat(r===n-1?"hidden":""," text-xl cursor-pointer inline-flex items-center pt-4 pr-1 font-medium text-primary border-t-2 border-transparent hover:opacity-60"),children:[Object($.jsx)(Y.b,{className:"w-8 h-8 mr-3 text-gray-400","aria-hidden":"true"}),"Next"]})})]})},J=s.p+"static/media/webShopBanner.2bef6c30.jpg",K=function(e){var t=e.type,s=e.path,a=e.color,r=e.title,n=e.text,c=Object(d.g)(),i=t?J:"";return Object($.jsxs)("div",{className:"w-full lg:h-500px xl:h-600px flex flex-col xl:flex-row justify-between",children:[Object($.jsx)("img",{src:i}),Object($.jsxs)("div",{className:"flex justify-center items-center text-center flex-col w-full p-24 bg-".concat(a),children:[Object($.jsx)("h2",{className:"text-h1 mb-24",children:r}),Object($.jsx)("p",{className:"mb-24",children:n}),Object($.jsx)(E,{title:"Shop Now",onClick:function(){return c(s)}})]})]})},Z=function(e){var t=e.categories;return Object($.jsxs)("div",{className:"w-10/12 p-24 mx-auto",children:[Object($.jsx)("h1",{className:"text-whitesmoke text-h1 text-left mb-24 ml-24",children:"Categories"}),Object($.jsx)("div",{className:"flex justify-items-start items-center flex-wrap",children:null===t||void 0===t?void 0:t.map((function(e){return Object($.jsx)(U,{category:e},e.id)}))})]})},Q=function(e){var t=e.name,s=e.products;return Object($.jsxs)("div",{className:"w-10/12 p-24 mx-auto",children:[Object($.jsx)("h1",{className:"text-whitesmoke text-h1 text-left mb-24 ml-24",children:t}),Object($.jsx)("div",{className:"flex justify-items-start items-center flex-wrap",children:null===s||void 0===s?void 0:s.map((function(e){return Object($.jsx)(z,{product:e,category:t},e.id)}))})]})},X=function(){var e=T(),t=Object(i.a)(e,2),s=t[0].token,r=t[1],n=Object(d.g)(),c=Object(a.useState)(s),l=Object(i.a)(c,2),o=l[0],u=l[1];return Object(a.useEffect)((function(){u(s)}),[s]),Object($.jsxs)(H,{children:[Object($.jsx)(B,{path:"/",name:"Home"}),Object($.jsx)(B,{path:"/categories",name:"Categories"}),o&&Object($.jsx)(B,{path:"/cart",name:"Cart"}),o&&Object($.jsx)(B,{path:"/orders",name:"Orders"}),o&&Object($.jsx)(B,{path:"/subscriptions",name:"Subscriptions"}),o&&Object($.jsx)(B,{path:"/wages",name:"Wages"}),o&&Object($.jsx)(B,{onClick:function(){null===r||void 0===r||r({type:"LOGOUT"}),localStorage.removeItem("token");var e=localStorage.getItem("token");u(e),n("/login")},name:"Logout"}),!o&&Object($.jsx)(B,{path:"/login",name:"Login"}),!o&&Object($.jsx)(B,{path:"/register",name:"Register"})]})},ee=s(8),te=s(91),se=s(88),ae=Object(te.a)(O||(O=Object(ee.a)(["\n    query UseGetCategories ($limit: Int!, $offset: Int! ) {\n        product_categories_aggregate {\n          aggregate {\n            count\n          }\n        }\n        product_categories(limit: $limit, offset: $offset ) {\n            id\n            name\n            image\n        }\n    }\n"]))),re=function(){var e,t,s=Object(a.useState)(0),n=Object(i.a)(s,2),c=n[0],l=n[1],o=(e=12,t=12*c,Object(se.a)(ae,{variables:{limit:e,offset:t},fetchPolicy:"no-cache"})),d=o.data,u=o.loading,m=Object(a.useCallback)((function(e){l(e)}),[l]);if(!d&&u)return Object($.jsx)(D,{});var b=null===d||void 0===d?void 0:d.product_categories_aggregate.aggregate.count;return 0===b?Object($.jsx)("div",{className:"flex w-full absolute top-1/4 items-center justify-center text-xxl text-whitesmoke",children:"Currently there are no items..."}):Object($.jsxs)(r.a.Fragment,{children:[Object($.jsx)(Z,{categories:d.product_categories}),b&&b>12&&Object($.jsx)("div",{className:"w-10/12 p-24 mx-auto",children:Object($.jsx)(V,{currentPage:c,total:null!==b&&void 0!==b?b:0,displayPerPage:12,onPageChange:m})})]})},ne=Object(te.a)(f||(f=Object(ee.a)(["\n  query UseGetCategoryProducts($category_id: uuid!, $limit: Int!, $offset: Int!) {\n    products(where: {category_id: {_eq: $category_id}}, limit: $limit, offset: $offset) {\n      id\n      image\n      name\n      price\n      description\n      category_id\n      place\n      date_start\n      date_end\n      course_last\n      course_cost\n      course_plan\n    }\n    products_aggregate(where: {category_id: {_eq: $category_id}}) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]))),ce=function(){var e,t,s,n=Object(d.f)().state,c=Object(a.useState)(0),l=Object(i.a)(c,2),o=l[0],u=l[1],m=(e=n.id,t=8,s=8*o,Object(se.a)(ne,{variables:{category_id:e,limit:t,offset:s},fetchPolicy:"no-cache"})),b=m.data,j=m.loading,x=Object(a.useCallback)((function(e){u(e)}),[u]);if(!b&&j)return Object($.jsx)(D,{});var p=null===b||void 0===b?void 0:b.products_aggregate.aggregate.count;return 0===p?Object($.jsx)("div",{className:"flex w-full absolute top-1/4 items-center justify-center text-xxl text-whitesmoke",children:"Currently there are no items..."}):Object($.jsxs)(r.a.Fragment,{children:[Object($.jsx)(Q,{id:n.id,name:n.name,products:b.products}),p&&p>8&&Object($.jsx)("div",{className:"w-10/12 p-24 mx-auto",children:Object($.jsx)(V,{currentPage:o,total:null!==p&&void 0!==p?p:0,displayPerPage:8,onPageChange:x})})]})},ie=s(7),le=s.n(ie),oe=s(11),de=Object(te.a)(g||(g=Object(ee.a)(["\n    query UseGetCartProducts($cart_id: uuid!) {\n        cart_item(where: {cart_id: {_eq: $cart_id}}) {\n            id\n            product {\n              id\n              image\n              name\n              price\n            }\n        }\n    }\n"]))),ue=function(e){return Object(se.a)(de,{variables:{cart_id:e},fetchPolicy:"no-cache"})},me=s(89),be=Object(te.a)(v||(v=Object(ee.a)(["\n  mutation MyMutation(\n    $first_name: String!\n    $last_name: String!\n    $country: String!\n    $city: String!\n    $address: String!\n    $zip_code: String!\n    $phone: String!\n    $total_price: numeric!\n  ) {\n    insert_orders_one(\n      object: {\n        first_name: $first_name\n        last_name: $last_name\n        country: $country\n        city: $city\n        address: $address\n        zip_code: $zip_code\n        phone: $phone\n        total_price: $total_price\n      }\n    ) {\n      id\n    }\n  }\n"]))),je=Object(te.a)(w||(w=Object(ee.a)(["\n  mutation InsertOrderProducts($cart_id: uuid!, $objects: [order_products_insert_input!]!) {\n    insert_order_products(objects: $objects) {\n      affected_rows\n    }\n    delete_cart_item(where: { cart_id: { _eq: $cart_id } }) {\n      affected_rows\n    }\n  }\n"]))),xe=function(e){var t,s,a,n,c,i,l,o=e.continueToPayment,d=Object(L.a)(),u=d.register,m=d.handleSubmit,b=d.formState.errors;return Object($.jsx)(r.a.Fragment,{children:Object($.jsxs)("form",{onSubmit:m(o),children:[Object($.jsx)(A,{id:"first_name",type:"text",labelText:"First Name",labelClass:"text-whitesmoke text-lg",wrapperClassName:"mb-12",customClass:"mb-8 rounded-xs",innerRef:u("first_name",{required:"First Name required!"}),errorText:null===(t=b.first_name)||void 0===t?void 0:t.message}),Object($.jsx)(A,{id:"last_name",type:"text",labelText:"Last Name",labelClass:"text-whitesmoke text-lg",wrapperClassName:"mb-12",customClass:"mb-8 rounded-xs",innerRef:u("last_name",{required:"Last Name required!"}),errorText:null===(s=b.last_name)||void 0===s?void 0:s.message}),Object($.jsx)(A,{id:"country",type:"text",labelText:"Country",labelClass:"text-whitesmoke text-lg",wrapperClassName:"mb-12",customClass:"mb-8 rounded-xs",innerRef:u("country",{required:"Country required!"}),errorText:null===(a=b.country)||void 0===a?void 0:a.message}),Object($.jsx)(A,{id:"city",type:"text",labelText:"City",labelClass:"text-whitesmoke text-lg",wrapperClassName:"mb-12",customClass:"mb-8 rounded-xs",innerRef:u("city",{required:"City required!"}),errorText:null===(n=b.city)||void 0===n?void 0:n.message}),Object($.jsx)(A,{id:"address",type:"text",labelText:"Address",labelClass:"text-whitesmoke text-lg",wrapperClassName:"mb-12",customClass:"mb-8 rounded-xs",innerRef:u("address",{required:"Address required!"}),errorText:null===(c=b.address)||void 0===c?void 0:c.message}),Object($.jsx)(A,{id:"zip_code",type:"text",labelText:"Zip Code",labelClass:"text-whitesmoke text-lg",wrapperClassName:"mb-12",customClass:"mb-8 rounded-xs",innerRef:u("zip_code",{required:"Zip code required!"}),errorText:null===(i=b.zip_code)||void 0===i?void 0:i.message}),Object($.jsx)(A,{id:"phone",type:"text",labelText:"Phone",labelClass:"text-whitesmoke text-lg",wrapperClassName:"mb-12",customClass:"mb-8 rounded-xs",innerRef:u("phone",{required:"Phone required!"}),errorText:null===(l=b.phone)||void 0===l?void 0:l.message}),Object($.jsx)(E,{buttonColor:"primary",size:"md",textColor:"whitesmoke",title:"Continue to Payment",customClass:"mt-16",block:!0})]})})},pe=Object(te.a)(y||(y=Object(ee.a)(['\n  mutation CreatePaymentIntent(\n    $amount: Float!\n    $currency: String = "USD"\n    $order_id: uuid!\n    $duration: String\n    $unit: String\n  ) {\n    createPaymentIntent(\n      data: {\n        amount: $amount\n        currency: $currency\n        order_id: $order_id\n        duration: $duration\n        unit: $unit\n      }\n    ) {\n      link\n    }\n  }\n']))),he=function(){return Object(me.a)(pe)},Oe=function(){var e=T(),t=Object(i.a)(e,1)[0].user,s=ue(t.cart_id),r=s.data,n=s.loading,c=Object(me.a)(be),l=Object(i.a)(c,1)[0],o=Object(me.a)(je),d=Object(i.a)(o,1)[0],u=he(),m=Object(i.a)(u,1)[0],b=Object(a.useState)(!1),j=Object(i.a)(b,2),x=j[0],p=j[1];if(!r&&n)return Object($.jsx)(D,{});if(x)return Object($.jsx)(D,{});var h=null===r||void 0===r?void 0:r.cart_item,O=0;function f(){return f=Object(oe.a)(le.a.mark((function e(s){var a,r,n,c,i,o;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,l({variables:{first_name:s.first_name,last_name:s.last_name,country:s.country,city:s.city,address:s.address,zip_code:s.zip_code,phone:s.phone,total_price:O}});case 3:if(a=e.sent,!(r=a.data.insert_orders_one.id)||!h){e.next=15;break}return n=h.map((function(e){return{order_id:r,price:e.product.price,product_id:e.product.id}})),c=t.cart_id,e.next=10,d({variables:{objects:n,cart_id:c}});case 10:return e.next=12,m({variables:{amount:O,currency:"USD",order_id:r}});case 12:i=e.sent,o=i.data.createPaymentIntent,window.location.replace("https://localhost:3000/choose-provider/".concat("7b273382-9ac1-4728-8489-2b93b6f59fae","/").concat(o.link));case 15:p(!1);case 16:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}return null===h||void 0===h||h.map((function(e){O+=e.product.price})),Object($.jsxs)("div",{className:"w-10/12 p-24 mx-auto",children:[Object($.jsx)("h1",{className:"mb-32 text-h1 text-whitesmoke",children:" Checkout "}),Object($.jsxs)("div",{className:"flex justify-between",children:[Object($.jsxs)("div",{className:"flex flex-col w-2/5 px-40",children:[Object($.jsx)("h2",{className:"mb-24 font-medium text-left text-h3 text-whitesmoke",children:"Contact information"}),Object($.jsx)(xe,{continueToPayment:function(e){return f.apply(this,arguments)}})]}),Object($.jsxs)("div",{className:"flex flex-col w-3/5 px-40",children:[Object($.jsx)("h2",{className:"mb-24 font-medium text-left text-h3 text-whitesmoke",children:"Order Summary"}),Object($.jsx)("div",{className:"mb-64 overflow-auto h-550px",children:Object($.jsx)("ul",{role:"list",children:null===h||void 0===h?void 0:h.map((function(e){return Object($.jsxs)("li",{className:"flex mb-16 h-150px",children:[Object($.jsx)(R,{src:e.product.image,alt:"".concat(e.product.name,"-image"),wrapperClassName:"flex justify-center items-center w-1/4 border-default border-solid border-lightGray"}),Object($.jsx)("div",{className:"flex flex-col flex-1 pb-12 mx-24",children:Object($.jsxs)("div",{className:"flex justify-between text-xl font-medium text-gray-900",children:[Object($.jsx)("h3",{className:"text-whitesmoke",children:e.product.name}),Object($.jsxs)("p",{className:"ml-4 text-whitesmoke",children:["$",e.product.price]})]})})]},e.id)}))})}),Object($.jsx)("div",{className:"border-solid border-t-default border-lightGray",children:Object($.jsxs)("div",{className:"flex justify-between mt-12 mb-24 font-medium text-gray-500 text-md",children:[Object($.jsx)("p",{className:"text-xl text-whitesmoke",children:"Order Total"}),Object($.jsxs)("p",{className:"text-xl text-whitesmoke",children:["$",O]})]})})]})]})]})},fe=Object(te.a)(_||(_=Object(ee.a)(["\n    query UseGetHomepageProducts($limit: Int!) {\n        products(order_by: {price: desc}, limit: $limit) {\n          id\n          image\n          name\n          price\n          description\n          category_id\n          place\n          date_start\n          date_end\n          course_cost\n          course_plan\n          course_last\n        }\n    }\n"]))),ge=function(){var e,t,s=(t=3,Object(se.a)(fe,{variables:{limit:t},fetchPolicy:"no-cache"})),a=s.data,r=s.loading;return!a&&r?Object($.jsx)(D,{}):Object($.jsxs)("div",{className:"w-10/12 p-24 mx-auto",children:[Object($.jsx)("h1",{className:"text-whitesmoke text-h1 text-center my-40 ml-24",children:"Welcome to Web Shop!"}),Object($.jsx)(K,{type:!0,path:"/categories",color:"blue",title:"Courses",text:"We have the best courses!"}),Object($.jsx)("h2",{className:"text-h1 text-whitesmoke text-center my-40 ml-24",children:"Best Sellers"}),Object($.jsx)("div",{className:"flex justify-center items-center flex-wrap",children:null===a||void 0===a||null===(e=a.products)||void 0===e?void 0:e.map((function(e,t){return Object($.jsx)(z,{product:e},t)}))})]})},ve=Object(te.a)(N||(N=Object(ee.a)(["\n  mutation Login($username: String!, $password: String!) {\n    login(username: $username, password: $password) {\n      accessToken\n    }\n  }\n"]))),we=function(){var e=Object(me.a)(ve),t=Object(i.a)(e,2),s=t[0],r=t[1],n=r.data,c=(r.loading,r.called),l=Object(a.useState)(!1),o=Object(i.a)(l,2),u=o[0],m=o[1],b=T(),j=Object(i.a)(b,2)[1],p=Object(d.g)();return Object(a.useEffect)((function(){var e;c&&n&&((null===n||void 0===n||null===(e=n.login)||void 0===e?void 0:e.accessToken)?(null===j||void 0===j||j({type:"SET_TOKEN",payload:n.login.accessToken}),null===j||void 0===j||j({type:"SET_USER",payload:x(n.login.accessToken)}),localStorage.setItem("token",n.login.accessToken),p("/")):m(!0))}),[n,c]),Object($.jsx)("div",{className:"flex flex-col items-center justify-between w-full top-1/4 absolute ",children:Object($.jsx)(W,{error:u,onClick:function(e,t){return s({variables:{username:e,password:t}})}})})},ye=s.p+"static/media/failed.a7222140.jpg",_e=s.p+"static/media/success.ac81e080.jpg",Ne=Object(te.a)(C||(C=Object(ee.a)(["\n  mutation FinalizeOrder($payment_intent_id: String!) {\n    finalizeOrder(data: { payment_intent_id: $payment_intent_id }) {\n      ok\n    }\n  }\n"])));!function(e){e.SUCCESS="SUCCESS",e.FAIL="FAIL",e.ERROR="ERROR"}(k||(k={}));var Ce,ke,$e,Se,Pe,Te,qe,Ie,Re,Ee,Fe,Ge=function(e){var t=e.title,s=e.type,r=e.onClick,n=Object(me.a)(Ne),c=Object(i.a)(n,2),l=c[0],o=c[1].loading,d=T(),u=Object(i.a)(d,1)[0].user;return Object(a.useEffect)((function(){if(u){var e=new URLSearchParams(window.location.search).get("payment_intent_id");setTimeout((function(){l({variables:{payment_intent_id:e}})}),0)}}),[u]),o||!u.id?Object($.jsx)(D,{}):Object($.jsx)("div",{className:"w-1/3 m-40 mx-auto border-solid border-default border-lightGray",children:Object($.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[Object($.jsx)(R,{src:s===k.SUCCESS?_e:ye}),Object($.jsxs)("div",{className:"p-4 mt-8 text-center",children:[Object($.jsx)("h5",{className:"mb-32 font-semibold text-xxl text-whitesmoke",children:t}),Object($.jsx)(E,{buttonColor:s?"success":"red",size:"xl",textColor:"whitesmoke",title:"Proceed",onClick:r,customClass:"mb-24"})]})]})})},ze=Object(te.a)(Ce||(Ce=Object(ee.a)(["\n    query UseGetProductById($id: uuid!) {\n        products(where: {id: {_eq: $id}}) {\n          id\n          image\n          name\n          price\n          description\n          category_id\n          place\n          date_start\n          date_end\n          course_cost\n          course_last\n          course_plan\n        }\n    }\n"]))),Ue=Object(te.a)(ke||(ke=Object(ee.a)(["\n  mutation MyMutation2($cart_id: uuid!, $product_id: uuid!) {\n    insert_cart_item_one(object: {cart_id: $cart_id, product_id: $product_id}, on_conflict: {constraint: cart_item_product_id_cart_id_key, update_columns: []}) {\n      id\n    }\n  }\n"]))),Le=s(35),Ae=(s(51),function(){var e,t=Object(d.f)().state,s=Object(d.g)(),r=(e=t.id,Object(se.a)(ze,{variables:{id:e}})),n=r.data,c=r.loading,l=Object(me.a)(Ue),o=Object(i.a)(l,1)[0],u=Object(a.useState)(!1),m=Object(i.a)(u,2),b=m[0],j=m[1],x=T(),p=Object(i.a)(x,1)[0].user;if(!n&&c)return Object($.jsx)(D,{});var h=n.products[0];function O(e){var t=e.split("T"),s=t[0].split("-"),a=t[1].split(".")[0].split("+");return s[2]+"/"+s[1]+"/"+s[0]+" "+a[0]}function f(){return(f=Object(oe.a)(le.a.mark((function e(s){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),!g()||(h.course_cost||h.course_last||h.course_plan)&&"Courses"===t.category){e.next=6;break}return Le.b.error("Item has expired!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,progress:void 0}),j(!1),e.abrupt("return");case 6:return e.next=8,o({variables:{cart_id:p.cart_id,product_id:s}});case 8:Le.b.success("Item added to cart!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,progress:void 0}),j(!1);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){var e=new Date;return new Date(h.date_start)<e&&!h.course_cost}return b?Object($.jsx)(D,{}):Object($.jsxs)("div",{className:"flex py-24 px-40 w-10/12 mx-auto",children:[Object($.jsx)("div",{className:"w-1/3",children:Object($.jsx)(R,{wrapperClassName:"border-solid border-default border-lightGray h-full",alt:"".concat(h.name,"-image"),src:h.image})}),Object($.jsxs)("div",{className:"flex flex-col w-2/3 px-24",children:[Object($.jsxs)("h1",{className:"text-whitesmoke text-left text-h1 mb-24",children:[" ",h.name," "]}),Object($.jsxs)("p",{className:"text-base text-lightGray text-left mb-16 whitespace-normal break-all ",children:[" ",h.description," "]}),h&&h.date_start&&!h.course_cost&&Object($.jsxs)("div",{className:"text-whitesmoke text-md font-semibold mb-16",children:["Start: ",O(h.date_start)]}),h&&h.date_end&&!h.course_cost&&Object($.jsxs)("div",{className:"text-whitesmoke text-md font-semibold mb-16",children:["End: ",O(h.date_end)," "]}),g()&&Object($.jsx)("div",{className:"text-red mb-16",children:" Item Expired"}),"Courses"===t.category&&h.course_cost&&Object($.jsxs)("div",{className:"text-lg text-whitesmoke font-semibold text-left mb-12",children:[" Subscription: $",h.course_cost+" "+h.course_plan+" / "+h.course_last+" times"," "]}),Object($.jsxs)("div",{className:"flex justify-between mb-24  border-b-default border-solid border-gray",children:[h&&h.place&&Object($.jsxs)("span",{className:"text-success text-lg font-semibold",children:[" ",h.place," "]}),h.price&&Object($.jsxs)("span",{className:"text-xl text-whitesmoke font-semibold text-left mb-12",children:[" $",h.price," "]})]}),Object($.jsxs)("div",{className:"flex flex-wrap mb-4 w-full justify-end",children:["Courses"===t.category||h.course_cost&&h.course_last&&h.course_plan&&Object($.jsx)(E,{onClick:function(){s("subscription-checkout",{state:{product:h}})},size:"md",buttonColor:"primary",title:"Subscribe",customClass:"mr-16"}),Object($.jsx)(E,{onClick:function(){return function(e){return f.apply(this,arguments)}(h.id)},size:"md",buttonColor:"primary",title:"Add to Cart"})]})]}),Object($.jsx)(Le.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,pauseOnHover:!0,theme:"dark"})]})}),We=Object(te.a)($e||($e=Object(ee.a)(["\n  mutation Registration($fullName: String!, $email: String!, $password: String!) {\n    registration(fullName: $fullName, email: $email, password: $password) {\n      id\n    }\n  }\n"]))),Me=function(){var e=Object(me.a)(We),t=Object(i.a)(e,2),s=t[0],r=t[1],n=r.data,c=r.called,l=Object(d.g)(),o=Object(a.useState)(!1),u=Object(i.a)(o,2),m=u[0],b=u[1];return Object(a.useEffect)((function(){c&&n&&(n.registration.id?l("/login"):b(!0))}),[n,c]),Object($.jsx)("div",{className:"flex flex-col items-center justify-between w-full top-1/4 absolute ",children:Object($.jsx)(M,{error:m,onClick:function(e,t,a){return s({variables:{fullName:e,email:t,password:a}})}})})},De=Object(te.a)(Se||(Se=Object(ee.a)(["\n  mutation MyMutation ($id: uuid!) {\n    delete_cart_item(where: {id: {_eq: $id}}) {\n        affected_rows\n    }\n  }\n"]))),Be=function(){var e=T(),t=Object(i.a)(e,1)[0].user,s=Object(d.g)(),a=Object(me.a)(De),r=Object(i.a)(a,1)[0],n=ue(t.cart_id),c=n.data,l=n.loading,o=n.refetch;if(!c&&l)return Object($.jsx)(D,{});var u=null===c||void 0===c?void 0:c.cart_item,m=0;function b(){return(b=Object(oe.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({variables:{id:t}});case 2:o(),Le.b.success("Item removed from cart!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,progress:void 0});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return null===u||void 0===u||u.map((function(e){m+=e.product.price})),Object($.jsxs)("div",{className:"w-10/12 p-24 mx-auto",children:[Object($.jsx)("h1",{className:"mb-32 text-h1 text-whitesmoke",children:" Shopping cart "}),Object($.jsxs)("div",{className:"flex w-full",children:[Object($.jsx)("div",{className:"w-3/5 overflow-auto h-600px",children:Object($.jsx)("ul",{role:"list",children:u&&u.length>0?u.map((function(e){return Object($.jsxs)("li",{className:"flex mb-16 h-180px",children:[Object($.jsx)(R,{src:e.product.image,alt:"".concat(e.product.name,"-image"),wrapperClassName:"flex justify-center items-center w-1/4 border-default border-solid border-lightGray"}),Object($.jsxs)("div",{className:"flex flex-col flex-1 pb-12 mx-24",children:[Object($.jsxs)("div",{className:"flex justify-between text-xl font-medium text-whitesmoke",children:[Object($.jsx)("h3",{children:e.product.name}),Object($.jsxs)("p",{className:"ml-4",children:["$",e.product.price]})]}),Object($.jsx)("div",{className:"flex items-end justify-between flex-1 text-md",children:Object($.jsx)("button",{onClick:function(){return function(e){return b.apply(this,arguments)}(e.id)},type:"button",className:"font-medium text-primary hover:underline",children:"Remove"})})]})]},e.product.id)})):Object($.jsxs)("div",{className:"block",children:[Object($.jsx)("div",{className:"text-whitesmoke text-xl mb-12",children:" You have no items in your cart... "}),Object($.jsx)(E,{buttonColor:"primary",size:"md",textColor:"whitesmoke",onClick:function(){s("/categories")},title:"Continue Shopping"})]})})}),Object($.jsxs)("div",{className:"w-2/5 ml-16",children:[Object($.jsx)("h2",{className:"mb-24 font-medium text-center text-h3 text-whitesmoke",children:"Order Summary"}),Object($.jsxs)("div",{className:"flex justify-between mb-24 font-medium text-gray-500 text-md",children:[Object($.jsx)("p",{className:"text-whitesmoke",children:"Order Total"}),Object($.jsxs)("p",{className:"text-whitesmoke",children:["$",m]})]}),Object($.jsx)(E,{buttonColor:"primary",size:"md",textColor:"whitesmoke",onClick:function(){!!u&&s("/checkout")},title:"Checkout",block:!0,disabled:!u.length})]})]}),Object($.jsx)(Le.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,pauseOnHover:!0,theme:"dark"})]})},He=Object(te.a)(Pe||(Pe=Object(ee.a)(["\n    query useGetUserOrders($user_id: uuid!, $limit: Int!, $offset: Int!) {\n        orders(where: {user_id: {_eq: $user_id}}, limit: $limit, offset: $offset) {\n            id\n            created_at\n            status\n            total_price\n            address\n            city\n            country\n            phone\n            zip_code\n            orderProducts {\n                product_id,\n                price,\n                product {\n                    name\n                    image\n                }\n            }\n        }\n        orders_aggregate(where: {user_id: {_eq: $user_id}}) {\n            aggregate {\n              count\n            }\n        }\n    }\n"]))),Ye=function(e){var t=e.order,s=e.type;return Object($.jsxs)("div",{className:"w-full mx-auto text-left",children:[Object($.jsxs)("div",{className:"flex text-whitesmoke text-xl my-8",children:[Object($.jsx)("span",{className:"w-1/4",children:"Order ID"}),Object($.jsx)("span",{className:"w-1/4",children:"Order Date"}),Object($.jsx)("span",{className:"w-1/4",children:"Order Status"}),Object($.jsx)("span",{className:"w-1/4",children:"Order Total"})]}),Object($.jsxs)("div",{className:"flex text-whitesmoke mb-24",children:[Object($.jsx)("span",{className:"w-1/4",children:t.id}),Object($.jsx)("span",{className:"w-1/4",children:function(e){var t=e.split("T"),s=t[0].split("-"),a=t[1].split(".");return s[2]+"/"+s[1]+"/"+s[0]+" "+a[0]}(t.created_at)}),Object($.jsx)("span",{className:"w-1/4",children:t.status}),Object($.jsxs)("span",{className:"w-1/4",children:["$",t.total_price]})]}),s&&Object($.jsxs)(r.a.Fragment,{children:[Object($.jsxs)("div",{className:"flex text-whitesmoke text-xl my-8",children:[Object($.jsx)("span",{className:"w-1/4",children:"Country"}),Object($.jsx)("span",{className:"w-1/4",children:"City"}),Object($.jsx)("span",{className:"w-1/4",children:"Address"}),Object($.jsx)("span",{className:"w-1/4",children:"Phone"})]}),Object($.jsxs)("div",{className:"flex text-whitesmoke mb-24",children:[Object($.jsx)("span",{className:"w-1/4",children:t.country}),Object($.jsxs)("span",{className:"w-1/4",children:[t.city," (",t.zip_code,")"]}),Object($.jsx)("span",{className:"w-1/4",children:t.address}),Object($.jsx)("span",{className:"w-1/4",children:t.phone})]})]})]})},Ve=function(e){var t=e.order,s=Object(d.g)();return Object($.jsxs)("li",{className:"flex flex-col justify-start w-1/6 my-16 mr-32",children:[Object($.jsx)(R,{src:t.product.image,alt:"".concat(t.product.name,"-image"),wrapperClassName:"flex justify-center h-200px items-center border-default border-solid border-lightGray mb-16"}),Object($.jsxs)("div",{className:"flex justify-between items-center mb-16 px-8",children:[Object($.jsx)("h3",{className:"text-xl text-whitesmoke cursor-pointer hover:text-primary",onClick:function(){return e=t.product_id,void s("/product",{state:{id:e}});var e},children:t.product.name}),Object($.jsxs)("p",{className:"text-lg text-whitesmoke",children:["$",t.price]})]})]})},Je=function(){var e,t,s,n,c=T(),l=Object(i.a)(c,1)[0].user,o=Object(a.useState)(0),d=Object(i.a)(o,2),u=d[0],m=d[1],b=Object(a.useState)(!1),j=Object(i.a)(b,2),x=j[0],p=j[1],h=Object(a.useState)({id:"",created_at:"",status:"",total_price:"",address:"",city:"",country:"",phone:"",zip_code:"",orderProducts:[]}),O=Object(i.a)(h,2),f=O[0],g=O[1],v=(t=l.id,s=6,n=6*u,Object(se.a)(He,{variables:{user_id:t,limit:s,offset:n}})),w=v.data,y=v.loading,_=Object(a.useCallback)((function(e){m(e)}),[m]);if(!w&&y)return Object($.jsx)(D,{});var N=null===w||void 0===w?void 0:w.orders_aggregate.aggregate.count;return 0===N?Object($.jsx)("div",{className:"flex w-full absolute top-1/4 items-center justify-center text-xxl text-whitesmoke",children:"You have not ordered anything yet..."}):Object($.jsx)(r.a.Fragment,{children:Object($.jsx)("div",{className:"w-10/12 p-24 mx-auto",children:x?Object($.jsxs)("div",{className:"mx-auto",children:[Object($.jsxs)("div",{className:"flex justify-between items-center border-b-default border-solid border-lightGray mb-16",children:[Object($.jsx)("span",{className:"text-whitesmoke text-xxl",children:"Order Information"}),Object($.jsx)(E,{buttonColor:"primary",textColor:"whitesmoke",rounded:!0,onClick:function(){return p(!1)},title:"Back to Orders",customClass:"mb-4"})]}),Object($.jsx)(Ye,{order:f,type:!0}),Object($.jsxs)("div",{children:[Object($.jsx)("h1",{className:"text-whitesmoke text-xxl border-b-default border-solid border-lightGray mb-16",children:"Ordered Items"}),Object($.jsx)("ul",{className:"flex",role:"list",children:f.orderProducts.map((function(e){return Object($.jsx)(Ve,{order:e},e.id)}))})]})]}):Object($.jsxs)(r.a.Fragment,{children:[Object($.jsx)("h1",{className:"text-whitesmoke text-h1 text-left mb-32",children:"Orders"}),Object($.jsx)("div",{className:"flex justify-items-start items-center flex-wrap",children:null===w||void 0===w||null===(e=w.orders)||void 0===e?void 0:e.map((function(e){return Object($.jsxs)("div",{className:"w-full mx-auto text-left",children:[Object($.jsx)(Ye,{order:e}),Object($.jsx)("div",{className:"flex justify-end my-8 border-t-default border-gray",children:Object($.jsx)(E,{buttonColor:"primary",textColor:"whitesmoke",rounded:!0,onClick:function(){return function(e){p(!0),g(e)}(e)},title:"View Order",customClass:"mt-16"})})]},e.id)}))}),N&&N>6&&Object($.jsx)("div",{className:"w-10/12 p-24 mx-auto",children:Object($.jsx)(V,{currentPage:u,total:null!==N&&void 0!==N?N:0,displayPerPage:6,onPageChange:_})})]})})})},Ke=function(e){var t=e.children,s=e.loggedIn,a=e.path;return s?t:Object($.jsx)(d.a,{to:a})},Ze=function(e){var t,s,a,n,c,i=e.continueToPayment,l=Object(L.a)(),o=l.register,d=l.handleSubmit,u=l.formState.errors;return Object($.jsx)(r.a.Fragment,{children:Object($.jsxs)("form",{onSubmit:d(i),children:[Object($.jsx)(A,{id:"first_name",type:"text",labelText:"First Name",labelClass:"text-whitesmoke text-lg",wrapperClassName:"mb-12",customClass:"mb-8 rounded-xs",innerRef:o("first_name",{required:"First Name required!"}),errorText:null===(t=u.first_name)||void 0===t?void 0:t.message}),Object($.jsx)(A,{id:"last_name",type:"text",labelText:"Last Name",labelClass:"text-whitesmoke text-lg",wrapperClassName:"mb-12",customClass:"mb-8 rounded-xs",innerRef:o("last_name",{required:"Last Name required!"}),errorText:null===(s=u.last_name)||void 0===s?void 0:s.message}),Object($.jsx)(A,{id:"recipient_first_name",type:"text",labelText:"Recipient First Name",labelClass:"text-whitesmoke text-lg",wrapperClassName:"mb-12",customClass:"mb-8 rounded-xs",innerRef:o("recipient_first_name",{required:"Recipient First Name required!"}),errorText:null===(a=u.recipient_firstname)||void 0===a?void 0:a.message}),Object($.jsx)(A,{id:"recipient_last_name",type:"text",labelText:"Recipient Last Name",labelClass:"text-whitesmoke text-lg",wrapperClassName:"mb-12",customClass:"mb-8 rounded-xs",innerRef:o("recipient_last_name",{required:"Recipient Last Name required!"}),errorText:null===(n=u.recipient_lastname)||void 0===n?void 0:n.message}),Object($.jsx)(A,{id:"amount",type:"number",labelText:"Amount",labelClass:"text-whitesmoke text-lg",wrapperClassName:"mb-12",customClass:"mb-8 rounded-xs",innerRef:o("amount",{required:"Amount required!",min:{value:1,message:"Amount must be positive number!"}}),errorText:null===(c=u.amount)||void 0===c?void 0:c.message}),Object($.jsx)(E,{buttonColor:"primary",size:"md",textColor:"whitesmoke",title:"Continue to Payment",customClass:"mt-16",block:!0})]})})},Qe=function(e){var t=e.wage;return Object($.jsxs)("div",{className:"flex text-whitesmoke text-lg mb-24",children:[Object($.jsx)("span",{className:"w-1/4",children:t.id}),Object($.jsx)("span",{className:"w-1/6",children:function(e){var t=e.split("T"),s=t[0].split("-"),a=t[1].split(".");return s[2]+"/"+s[1]+"/"+s[0]+" "+a[0]}(t.created_at)}),Object($.jsx)("span",{className:"w-1/6",children:t.status}),Object($.jsxs)("span",{className:"w-1/6",children:["$",t.amount]}),Object($.jsxs)("span",{className:"w-1/6",children:[t.recipient_first_name+" "+t.recipient_last_name," "]})]})},Xe=Object(te.a)(Te||(Te=Object(ee.a)(['\n  mutation CreateWageIntent($amount: Float!, $currency: String = "USD", $order_id: uuid!) {\n    createWageIntent(data: { amount: $amount, currency: $currency, order_id: $order_id }) {\n      link\n    }\n  }\n']))),et=Object(te.a)(qe||(qe=Object(ee.a)(["\n    mutation MyMutation($amount: numeric!, $first_name: String!, $last_name: String!, $recipient_first_name: String!, $recipient_last_name: String!, $user_id: uuid!) {\n        insert_wages_one(object: {amount: $amount, first_name: $first_name, last_name: $last_name, recipient_first_name: $recipient_first_name, recipient_last_name: $recipient_last_name, user_id: $user_id}) {\n            id\n        }\n    }\n"]))),tt=Object(te.a)(Ie||(Ie=Object(ee.a)(["\n    query useGetUserWages($user_id: uuid!, $limit: Int!, $offset: Int!) {\n        wages(limit: $limit, offset: $offset, where: {user_id: {_eq: $user_id}}) {\n            id\n            first_name\n            last_name\n            amount\n            recipient_first_name\n            recipient_last_name\n            created_at\n            status\n        }\n        wages_aggregate {\n            aggregate {\n                count\n            }\n        }\n    }\n"]))),st=function(){var e,t,s,n,c=Object(a.useState)(!1),l=Object(i.a)(c,2),o=l[0],d=l[1],u=Object(a.useState)(0),m=Object(i.a)(u,2),b=m[0],j=m[1],x=Object(a.useState)(!1),p=Object(i.a)(x,2),h=p[0],O=p[1],f=T(),g=Object(i.a)(f,1)[0].user,v=(t=g.id,s=6,n=6*b,Object(se.a)(tt,{variables:{user_id:t,limit:s,offset:n},fetchPolicy:"no-cache"})),w=v.data,y=v.loading,_=v.refetch,N=Object(me.a)(et),C=Object(i.a)(N,1)[0],k=Object(me.a)(Xe),S=Object(i.a)(k,1)[0],P=Object(a.useCallback)((function(e){j(e)}),[j]);function q(){return q=Object(oe.a)(le.a.mark((function e(t){var s,a,r,n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,C({variables:{first_name:t.first_name,last_name:t.last_name,amount:t.amount,recipient_first_name:t.recipient_first_name,recipient_last_name:t.recipient_last_name,user_id:g.id}});case 4:if(s=e.sent,!(a=s.data.insert_wages_one.id)){e.next=12;break}return e.next=9,S({variables:{amount:Number.parseFloat(""+t.amount),currency:"USD",order_id:a}});case 9:r=e.sent,n=r.data.createWageIntent,window.location.replace("https://localhost:3000/choose-provider/".concat("7b273382-9ac1-4728-8489-2b93b6f59fae","/").concat(n.link));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:return e.prev=17,e.next=20,_();case 20:return O(!1),d(!0),e.finish(17);case 23:case"end":return e.stop()}}),e,null,[[1,14,17,23]])}))),q.apply(this,arguments)}if(!w||y||h)return Object($.jsx)(D,{});var I=null===w||void 0===w?void 0:w.wages_aggregate.aggregate.count;return Object($.jsx)("div",{className:"w-10/12 p-24 mx-auto",children:Object($.jsxs)("div",{className:"mx-auto",children:[Object($.jsxs)("div",{className:"flex items-center justify-between mb-16 border-solid border-b-default border-lightGray",children:[Object($.jsx)("span",{className:"text-whitesmoke text-xxl",children:"Wage"}),Object($.jsx)(E,{buttonColor:"primary",textColor:"whitesmoke",rounded:!0,onClick:function(){return d((function(){return!o}))},title:o?"Pay Wage":"See Wages",customClass:"mb-4"})]}),o?Object($.jsxs)(r.a.Fragment,{children:[" ",0===I?Object($.jsx)("div",{className:"flex w-full py-16 text-left text-xxl text-whitesmoke",children:"You have not paid any wage yet..."}):Object($.jsxs)(r.a.Fragment,{children:[Object($.jsxs)("div",{className:"flex py-8 mt-40 mb-24 text-xl text-left border-solid text-whitesmoke border-b-default border-lightGray",children:[Object($.jsx)("span",{className:"w-1/4",children:"Wage ID"}),Object($.jsx)("span",{className:"w-1/6",children:"Wage Date"}),Object($.jsx)("span",{className:"w-1/6",children:"Wage Status"}),Object($.jsx)("span",{className:"w-1/6",children:"Wage Amount"}),Object($.jsx)("span",{className:"w-1/6",children:"Wage Recipient"})]}),null===w||void 0===w||null===(e=w.wages)||void 0===e?void 0:e.map((function(e){return Object($.jsx)(Qe,{wage:e},e.id)})),I&&I>6&&Object($.jsx)("div",{className:"w-10/12 p-24 mx-auto",children:Object($.jsx)(V,{currentPage:b,total:null!==I&&void 0!==I?I:0,displayPerPage:6,onPageChange:P})})]})," "]}):Object($.jsx)("div",{className:"w-2/5 my-32",children:Object($.jsx)(Ze,{continueToPayment:function(e){return q.apply(this,arguments)}})})]})})},at=function(e){var t=e.subs,s=e.cancelSub;return Object($.jsxs)("div",{className:"flex text-whitesmoke text-lg mb-24 text-left",children:[Object($.jsx)("span",{className:"w-1/4",children:t.id}),Object($.jsx)("span",{className:"w-1/6",children:function(e){var t=e.split("T"),s=t[0].split("-"),a=t[1].split(".");return s[2]+"/"+s[1]+"/"+s[0]+" "+a[0]}(t.created_at)}),Object($.jsx)("span",{className:"w-1/6",children:t.status}),Object($.jsxs)("span",{className:"w-1/6",children:["$",t.product.course_cost]}),Object($.jsxs)("span",{className:"w-1/6",children:["yearly"===t.product.course_plan?t.product.course_last+" years":t.product.course_last+" months"," "]}),Object($.jsxs)("span",{className:"w-1/6 hidden",children:[" ",Object($.jsx)(E,{buttonColor:"primary",onClick:function(){s(t.id)},size:"base",textColor:"whitesmoke",title:"Cancel",disabled:"Created"!==t.status})," "]})]})},rt=Object(te.a)(Re||(Re=Object(ee.a)(["\n    query useGetUserWages($user_id: uuid!, $limit: Int!, $offset: Int!) {\n        subscriptions(limit: $limit, offset: $offset, where: {user_id: {_eq: $user_id}}) {\n            id\n            created_at\n            status\n            product {\n                id\n                course_cost\n                course_last\n                course_plan  \n            }\n        }\n        subscriptions_aggregate {\n            aggregate {\n                count\n            }\n        }\n    }\n"]))),nt=Object(te.a)(Ee||(Ee=Object(ee.a)(['\n    mutation MyMutation($id: uuid!, $status: String = "Canceled") {\n        update_subscriptions(where: {id: {_eq: $id}}, _set: {status: $status}) {\n            affected_rows\n        }\n    }\n']))),ct=function(){var e,t,s,n,c=Object(a.useState)(0),l=Object(i.a)(c,2),o=l[0],d=l[1],u=T(),m=Object(i.a)(u,1)[0].user,b=(t=m.id,s=6,n=6*o,Object(se.a)(rt,{variables:{user_id:t,limit:s,offset:n},fetchPolicy:"no-cache"})),j=b.data,x=b.loading,p=b.refetch,h=Object(me.a)(nt),O=Object(i.a)(h,1)[0],f=Object(a.useCallback)((function(e){d(e)}),[d]);function g(e){return v.apply(this,arguments)}function v(){return(v=Object(oe.a)(le.a.mark((function e(t){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O({variables:{id:t}});case 2:return e.next=4,p();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(!j||x)return Object($.jsx)(D,{});var w=null===j||void 0===j?void 0:j.subscriptions_aggregate.aggregate.count;return 0===w?Object($.jsx)("div",{className:"w-10/12 p-24 mx-auto text-center text-xxl text-whitesmoke",children:"You have not subscribed to courses yet..."}):Object($.jsx)("div",{className:"w-10/12 p-24 mx-auto",children:Object($.jsx)("div",{className:"mx-auto",children:Object($.jsxs)(r.a.Fragment,{children:[Object($.jsxs)("div",{className:"flex text-whitesmoke text-left text-xxl mb-24 mt-40 py-8 border-b-default border-solid border-lightGray",children:[Object($.jsx)("span",{className:"w-1/4",children:"Subscription ID"}),Object($.jsx)("span",{className:"w-1/6",children:"Date"}),Object($.jsx)("span",{className:"w-1/6",children:"Status"}),Object($.jsx)("span",{className:"w-1/6",children:"Cost"}),Object($.jsx)("span",{className:"w-1/6",children:"Plan"}),Object($.jsx)("span",{className:"w-1/6 hidden",children:"Action"})]}),null===j||void 0===j||null===(e=j.subscriptions)||void 0===e?void 0:e.map((function(e){return Object($.jsx)(at,{subs:e,cancelSub:g},e.id)})),w&&w>6&&Object($.jsx)("div",{className:"w-10/12 p-24 mx-auto",children:Object($.jsx)(V,{currentPage:o,total:null!==w&&void 0!==w?w:0,displayPerPage:6,onPageChange:f})})]})})})},it=Object(te.a)(Fe||(Fe=Object(ee.a)(["\n    mutation MyMutation($course: uuid!, $user_id: uuid!) {\n        insert_subscriptions_one(object: {course: $course, user_id: $user_id}) {\n            id\n        }\n    }\n"]))),lt=function(){var e=Object(d.f)().state,t=T(),s=Object(i.a)(t,1)[0].user,r=Object(a.useState)(!1),n=Object(i.a)(r,2),c=n[0],l=n[1],o=Object(me.a)(it),u=Object(i.a)(o,1)[0],m=he(),b=Object(i.a)(m,1)[0];console.log(e.product);var j=e.product;function x(){return(x=Object(oe.a)(le.a.mark((function e(){var t,a,r,n;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,u({variables:{user_id:s.id,course:j.id}});case 4:if(t=e.sent,!(a=t.data.insert_subscriptions_one.id)){e.next=12;break}return e.next=9,b({variables:{amount:j.course_cost,currency:"USD",order_id:a,duration:j.course_last.toString(),unit:"yearly"===j.course_plan?"YEAR":"MONTH"}});case 9:r=e.sent,n=r.data.createPaymentIntent,window.location.replace("https://localhost:3000/choose-provider/".concat("7b273382-9ac1-4728-8489-2b93b6f59fae","/").concat(n.link,"?subscribe=true"));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:return e.prev=17,l(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,14,17,20]])})))).apply(this,arguments)}return c?Object($.jsx)(D,{}):Object($.jsxs)("div",{className:"w-10/12 p-24 mx-auto",children:[Object($.jsxs)("h1",{className:"pb-16 mb-32 text-h1 text-whitesmoke border-b-default border-lightGray",children:[" ","Checkout"," "]}),Object($.jsxs)("div",{className:"flex py-24",children:[Object($.jsx)("div",{className:"w-1/3",children:Object($.jsx)(R,{wrapperClassName:"border-solid border-default border-lightGray h-full",alt:"".concat(j.name,"-image"),src:j.image})}),Object($.jsxs)("div",{className:"flex flex-col w-2/3 px-24",children:[Object($.jsxs)("h1",{className:"mb-24 text-left text-whitesmoke text-h1",children:[" ",j.name," "]}),Object($.jsxs)("p",{className:"mb-16 text-base text-left break-all whitespace-normal text-lightGray ",children:[" ",j.description," "]}),j.course_cost&&Object($.jsxs)("div",{className:"mb-12 text-lg font-semibold text-left text-whitesmoke",children:[" ","Subscription: $",j.course_cost+" "+j.course_plan+" / "+j.course_last+" times"," "]}),Object($.jsx)("div",{className:"flex justify-between mb-24",children:j&&j.place&&Object($.jsxs)("span",{className:"text-lg font-semibold text-success",children:[" ",j.place," "]})}),Object($.jsx)("div",{className:"flex flex-wrap justify-end w-full pt-16 border-solid border-t-default border-gray",children:Object($.jsx)(E,{onClick:function(){return function(){return x.apply(this,arguments)}()},size:"md",buttonColor:"primary",title:"Proceed to payment"})})]})]})]})},ot=function(){var e=T(),t=Object(i.a)(e,1)[0].token,s=Object(a.useState)(j()),r=Object(i.a)(s,2),n=r[0],c=r[1],u=Object(a.useState)(t),m=Object(i.a)(u,2),b=m[0],x=m[1];return Object(a.useEffect)((function(){c(j(t)),x(t)}),[t]),Object($.jsx)(l.a,{client:n,children:Object($.jsxs)(o.a,{children:[Object($.jsx)(X,{}),Object($.jsxs)(d.d,{children:[Object($.jsx)(d.b,{path:"/",element:Object($.jsx)(ge,{})}),Object($.jsx)(d.b,{path:"/login",element:Object($.jsx)(we,{})}),Object($.jsx)(d.b,{path:"/register",element:Object($.jsx)(Me,{})}),Object($.jsx)(d.b,{path:"/categories",element:Object($.jsx)(re,{})}),Object($.jsx)(d.b,{path:"/category",element:Object($.jsx)(ce,{})}),Object($.jsx)(d.b,{path:"/product",element:Object($.jsxs)(Ke,{loggedIn:b,path:"/login",children:[" ",Object($.jsx)(Ae,{})," "]})}),Object($.jsx)(d.b,{path:"/checkout",element:Object($.jsxs)(Ke,{loggedIn:b,path:"/login",children:[" ",Object($.jsx)(Oe,{})," "]})}),Object($.jsx)(d.b,{path:"/cart",element:Object($.jsxs)(Ke,{loggedIn:b,path:"/login",children:[" ",Object($.jsx)(Be,{})," "]})}),Object($.jsx)(d.b,{path:"/orders",element:Object($.jsxs)(Ke,{loggedIn:b,path:"/login",children:[" ",Object($.jsx)(Je,{})," "]})}),Object($.jsx)(d.b,{path:"/wages",element:Object($.jsxs)(Ke,{loggedIn:b,path:"/login",children:[" ",Object($.jsx)(st,{})," "]})}),Object($.jsx)(d.b,{path:"/subscriptions",element:Object($.jsxs)(Ke,{loggedIn:b,path:"/login",children:[" ",Object($.jsx)(ct,{})," "]})}),Object($.jsx)(d.b,{path:"/product/subscription-checkout",element:Object($.jsxs)(Ke,{loggedIn:b,path:"/login",children:[" ",Object($.jsx)(lt,{})," "]})}),Object($.jsx)(d.b,{path:"/success",element:Object($.jsx)(Ge,{title:"Payment successfull",type:k.SUCCESS})}),Object($.jsx)(d.b,{path:"/fail",element:Object($.jsx)(Ge,{title:"Payment failed",type:k.FAIL})}),Object($.jsx)(d.b,{path:"/error",element:Object($.jsx)(Ge,{title:"Payment error",type:k.ERROR})})]})]})})};var dt=function(){return Object($.jsx)(q,{children:Object($.jsx)(ot,{})})};s(78);c.a.render(Object($.jsx)(r.a.StrictMode,{children:Object($.jsx)(dt,{})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.050b240d.chunk.js.map